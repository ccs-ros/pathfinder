from ctypes import *from packet_class import *from serial_comm.msg import pkt_4_msg#***************************************************************************#* class Packet_4_Type(Structure)#*#* Description: C-type structure that defines the serial buffer packet fields #*                           #***************************************************************************class Packet_4_Type(Structure):	_pack_ = 1	_fields_=[("H1",c_ubyte),("H2",c_ubyte),("H3",c_ubyte),("counter",c_ushort),("time",c_ushort),("Acceleration_x",c_long),("Acceleration_y",c_long),("Acceleration_z",c_long),("Rate_p",c_long),("Rate_q",c_long),("Rate_r",c_long),("A2D_1",c_ushort),("A2D_2",c_ushort),("A2D_3",c_ushort),("A2D_4",c_ushort),("A2D_5",c_ushort),("A2D_6",c_ushort),("A2D_7",c_ushort),("A2D_8",c_ushort),("Grabber_status1",c_ubyte),("Grabber_status2",c_ubyte),("Grabber_status3",c_ubyte),("Grabber_status4",c_ubyte),("Grabber_status5",c_ubyte),("Grabber_status6",c_ubyte),("Voltage_bat5",c_ubyte),("Limit_switch1234",c_ubyte),("status",c_ubyte),("reserved",c_ubyte*7),("checksum",c_ubyte)]#***************************************************************************#* class Packet_4_Buff(Union)#*#* Description: Union structure that joins the serial buffer and packet structure #*                                    in the same memory location.#*                           #***************************************************************************class Packet_4_Buff(Union):	_fields_ = [("buffer",c_ubyte*64),("fields",Packet_4_Type)]#***************************************************************************#* class Packet_4(Packet_Class)#*#* Description: Specific packet class that contains serial buffer and fields structure and #*                                    ROS Topic message object.#*                           Includes methods for construction and copying data between buffer and message#***************************************************************************class Packet_4(Packet_Class):		#***************************************************************************	#* method __init__()	#*	#* Description: Constructs and initializes member data 	#*              	#***************************************************************************	def __init__(self):		self.packet = Packet_4_Buff()		self.initialize_packet(4)		self.msg = pkt_4_msg()		self.msg_class = pkt_4_msg		self.rate_Hz = 50		#***************************************************************************	#* method unpack_buffer2msg	#*	#* Description: copies serial buffer packet fields into ROS Topic message fields	#*              	#***************************************************************************	def unpack_buffer2msg(self):		self.msg.counter = self.packet.fields.counter		self.msg.time = self.packet.fields.time		self.msg.Acceleration_x = self.packet.fields.Acceleration_x		self.msg.Acceleration_y = self.packet.fields.Acceleration_y		self.msg.Acceleration_z = self.packet.fields.Acceleration_z		self.msg.Rate_p = self.packet.fields.Rate_p		self.msg.Rate_q = self.packet.fields.Rate_q		self.msg.Rate_r = self.packet.fields.Rate_r		self.msg.A2D_1 = self.packet.fields.A2D_1		self.msg.A2D_2 = self.packet.fields.A2D_2		self.msg.A2D_3 = self.packet.fields.A2D_3		self.msg.A2D_4 = self.packet.fields.A2D_4		self.msg.A2D_5 = self.packet.fields.A2D_5		self.msg.A2D_6 = self.packet.fields.A2D_6		self.msg.A2D_7 = self.packet.fields.A2D_7		self.msg.A2D_8 = self.packet.fields.A2D_8		self.msg.Grabber_status1 = self.packet.fields.Grabber_status1		self.msg.Grabber_status2 = self.packet.fields.Grabber_status2		self.msg.Grabber_status3 = self.packet.fields.Grabber_status3		self.msg.Grabber_status4 = self.packet.fields.Grabber_status4		self.msg.Grabber_status5 = self.packet.fields.Grabber_status5		self.msg.Grabber_status6 = self.packet.fields.Grabber_status6		self.msg.Voltage_bat5 = self.packet.fields.Voltage_bat5		self.msg.Limit_switch1234 = self.packet.fields.Limit_switch1234		self.msg.status = self.packet.fields.status		#***************************************************************************	#* method pack_msg2buffer	#*	#* Description: copies ROS Topic message fields into serial buffer packet fields	#*              	#***************************************************************************	def pack_msg2buffer(self,in_msg):		self.packet.fields.time = in_msg.time		self.packet.fields.Acceleration_x = in_msg.Acceleration_x		self.packet.fields.Acceleration_y = in_msg.Acceleration_y		self.packet.fields.Acceleration_z = in_msg.Acceleration_z		self.packet.fields.Rate_p = in_msg.Rate_p		self.packet.fields.Rate_q = in_msg.Rate_q		self.packet.fields.Rate_r = in_msg.Rate_r		self.packet.fields.A2D_1 = in_msg.A2D_1		self.packet.fields.A2D_2 = in_msg.A2D_2		self.packet.fields.A2D_3 = in_msg.A2D_3		self.packet.fields.A2D_4 = in_msg.A2D_4		self.packet.fields.A2D_5 = in_msg.A2D_5		self.packet.fields.A2D_6 = in_msg.A2D_6		self.packet.fields.A2D_7 = in_msg.A2D_7		self.packet.fields.A2D_8 = in_msg.A2D_8		self.packet.fields.Grabber_status1 = in_msg.Grabber_status1		self.packet.fields.Grabber_status2 = in_msg.Grabber_status2		self.packet.fields.Grabber_status3 = in_msg.Grabber_status3		self.packet.fields.Grabber_status4 = in_msg.Grabber_status4		self.packet.fields.Grabber_status5 = in_msg.Grabber_status5		self.packet.fields.Grabber_status6 = in_msg.Grabber_status6		self.packet.fields.Voltage_bat5 = in_msg.Voltage_bat5		self.packet.fields.Limit_switch1234 = in_msg.Limit_switch1234		self.packet.fields.status = in_msg.status