from ctypes import *from packet_class import *from serial_comm.msg import pkt_2_msg#***************************************************************************#* class Packet_2_Type(Structure)#*#* Description: C-type structure that defines the serial buffer packet fields #*                           #***************************************************************************class Packet_2_Type(Structure):	_pack_ = 1	_fields_=[("H1",c_ubyte),("H2",c_ubyte),("H3",c_ubyte),("counter",c_ushort),("time",c_ushort),("Obj_type",c_ubyte),("Obj_detection_conf",c_ubyte),("Obj_distance",c_short),("Obj_bearing",c_short),("Obj_distance_conf",c_ushort),("Obj_bearing_conf",c_ushort),("Obj_orientation1",c_short),("Obj_orientation2",c_short),("Obj_orientation1_conf",c_ushort),("Obj_orientation2_conf",c_ushort),("status",c_ubyte),("reserved",c_ubyte*5),("checksum",c_ubyte)]#***************************************************************************#* class Packet_2_Buff(Union)#*#* Description: Union structure that joins the serial buffer and packet structure #*                                    in the same memory location.#*                           #***************************************************************************class Packet_2_Buff(Union):	_fields_ = [("buffer",c_ubyte*32),("fields",Packet_2_Type)]#***************************************************************************#* class Packet_2(Packet_Class)#*#* Description: Specific packet class that contains serial buffer and fields structure and #*                                    ROS Topic message object.#*                           Includes methods for construction and copying data between buffer and message#***************************************************************************class Packet_2(Packet_Class):		#***************************************************************************	#* method __init__()	#*	#* Description: Constructs and initializes member data 	#*              	#***************************************************************************	def __init__(self):		self.packet = Packet_2_Buff()		self.initialize_packet(2)		self.msg = pkt_2_msg()		self.msg_class = pkt_2_msg		self.rate_Hz = 10		#***************************************************************************	#* method unpack_buffer2msg	#*	#* Description: copies serial buffer packet fields into ROS Topic message fields	#*              	#***************************************************************************	def unpack_buffer2msg(self):		self.msg.counter = self.packet.fields.counter		self.msg.time = self.packet.fields.time		self.msg.Obj_type = self.packet.fields.Obj_type		self.msg.Obj_detection_conf = self.packet.fields.Obj_detection_conf		self.msg.Obj_distance = self.packet.fields.Obj_distance		self.msg.Obj_bearing = self.packet.fields.Obj_bearing		self.msg.Obj_distance_conf = self.packet.fields.Obj_distance_conf		self.msg.Obj_bearing_conf = self.packet.fields.Obj_bearing_conf		self.msg.Obj_orientation1 = self.packet.fields.Obj_orientation1		self.msg.Obj_orientation2 = self.packet.fields.Obj_orientation2		self.msg.Obj_orientation1_conf = self.packet.fields.Obj_orientation1_conf		self.msg.Obj_orientation2_conf = self.packet.fields.Obj_orientation2_conf		self.msg.status = self.packet.fields.status		#***************************************************************************	#* method pack_msg2buffer	#*	#* Description: copies ROS Topic message fields into serial buffer packet fields	#*              	#***************************************************************************	def pack_msg2buffer(self,in_msg):		self.packet.fields.time = in_msg.time		self.packet.fields.Obj_type = in_msg.Obj_type		self.packet.fields.Obj_detection_conf = in_msg.Obj_detection_conf		self.packet.fields.Obj_distance = in_msg.Obj_distance		self.packet.fields.Obj_bearing = in_msg.Obj_bearing		self.packet.fields.Obj_distance_conf = in_msg.Obj_distance_conf		self.packet.fields.Obj_bearing_conf = in_msg.Obj_bearing_conf		self.packet.fields.Obj_orientation1 = in_msg.Obj_orientation1		self.packet.fields.Obj_orientation2 = in_msg.Obj_orientation2		self.packet.fields.Obj_orientation1_conf = in_msg.Obj_orientation1_conf		self.packet.fields.Obj_orientation2_conf = in_msg.Obj_orientation2_conf		self.packet.fields.status = in_msg.status